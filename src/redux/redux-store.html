<link rel="import" href="../../bower_components/polymer-redux/polymer-redux.html">
<link rel="import" href="redux-ignore.html">
<script>const Reducers = {};</script>
<!-- Reducers -->
<link rel="import" href="reducers/user-reducer.html">
<link rel="import" href="reducers/i18n-reducer.html">
<link rel="import" href="reducers/notifications-reducer.html">
<link rel="import" href="reducers/project-reducer.html">
<link rel="import" href="reducers/project-id-reducer.html">
<link rel="import" href="reducers/file-id-reducer.html">
<link rel="import" href="reducers/folder-id-reducer.html">
<link rel="import" href="reducers/path-reducer.html">
<link rel="import" href="reducers/trash-mode-reducer.html">
<link rel="import" href="reducers/projects-reducer.html">
<link rel="import" href="reducers/shared-projects-reducer.html">
<link rel="import" href="reducers/folders-reducer.html">
<link rel="import" href="reducers/files-reducer.html">
<link rel="import" href="reducers/stickers-reducer.html">
<link rel="import" href="reducers/comments-reducer.html">

<script>
    const initialState = {
        user: null,
        i18Loaded: false,
        notifications: [],
        project: null,
        projectId: '',
        fileId: '',
        folderId: '',
        path: '',
        trashMode: false,
        projects: [],
        shared: [],
        folders: [],
        files: [],
        stickers: [],
        comments: []
    };
    // Combine reducers
    const reducer = Redux.combineReducers({
       user: filterActions(Reducers.UserReducer,['UPDATE_USER','CLEAN_USER']),
       i18Loaded: filterActions(Reducers.I18nLoadedReducer,['UPDATE_I18_LOADED']),
       notifications: filterActions(Reducers.NotificationsReducer,['ADD_NOTIFICATION','REMOVE_NOTIFICATION','UPDATE_NOTIFICATION','SET_NOTIFICATIONS','CLEAN_NOTIFICATIONS']),
       project: filterActions(Reducers.ProjectReducer,['SET_PROJECT_STATE','UPDATE_PROJECT_STATE']),
       projectId: filterActions(Reducers.ProjectIdReducer,['UPDATE_PROJECT_ID']),
       fileId: filterActions(Reducers.FileIdReducer,['UPDATE_FILE_ID']),
       folderId: filterActions(Reducers.FolderIdReducer,['UPDATE_FOLDER_ID']),
       path: filterActions(Reducers.PathReducer,['UPDATE_PATH']),
       trashMode: filterActions(Reducers.TrashModeReducer,['UPDATE_TRASH_MODE']),
       projects: filterActions(Reducers.ProjectsReducer,['ADD_PROJECT','REMOVE_PROJECT','UPDATE_PROJECT','SET_PROJECTS','CLEAN_PROJECTS']),
       sharedProjects: filterActions(Reducers.SharedProjectsReducer,['UPDATE_SHARED_PROJECT','SET_SHARED_PROJECTS','CLEAN_SHARED_PROJECTS']),
       folders: filterActions(Reducers.FoldersReducer,['ADD_FOLDER','REMOVE_FOLDER','UPDATE_FOLDER','SET_FOLDERS','CLEAN_FOLDERS']),
       files: filterActions(Reducers.FilesReducer,['ADD_FILE','REMOVE_FILE','UPDATE_FILE','SET_FILES','CLEAN_FILES']),
       stickers: filterActions(Reducers.StickersReducer,['ADD_STICKER','REMOVE_STICKER','UPDATE_STICKER','SET_STICKERS','CLEAN_STICKERS']),
       comments: filterActions(Reducers.CommentsReducer,['ADD_COMMENT','REMOVE_COMMENT','UPDATE_COMMENT','SET_COMMENTS','CLEAN_COMMENTS'])
    });
    // Debug
    const composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__;
    let middleware = Redux.applyMiddleware(ReduxThunk.default);
    if(composeEnhancers) middleware = composeEnhancers(Redux.applyMiddleware(ReduxThunk.default));
    // Build store
    const ReduxStore = Redux.createStore(reducer,middleware);
    const ReduxBehavior = PolymerRedux(ReduxStore);

</script>